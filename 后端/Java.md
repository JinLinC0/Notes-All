# `Java`

## 基本概念

`Java` 是一种广泛使用的高级编程语言，由 `Sun Microsystems`公司（现为` Oracle `甲骨文公司所有）于 1995 年正式发布（第一个版本）由`James Gosling`编写。它以跨平台性、面向对象和健壮性著称，是当今企业级应用、移动开发和大数据领域的核心技术之一，`Java`使用最多的版本是8和11

***

### `Java`的重要特点

- `Java`语言是面向对象的（`oop`）

- `Java`语言是健壮性的，`Java`的强类型机制、异常处理、垃圾的自动收集等是健壮性的重要保证

- `Java`语言是跨平台性的：编译后的`.class`文件可以在跨平台上进行运行，不需要重新进行编译（由于底层中有`Java`虚拟机机制（`JVM`）的存在）

  ![image-20250311171735772](..\images\image-20250311171735772.png)

- `Java`语言是解释型性的

  解释性语言有：`JavaScript`、`PHP`、`Java`

  编译性语言有：`c`、`c++`

  解释性语言，编译后的代码不能直接被机器执行，需要解释器来执行；编译性语言，编译后的代码可以直接被机器执行（编译后的代码已经是二进制的了）

***

### 环境安装

#### 代码编辑器安装

一开始在学习的时候，推荐使用`Sublime Text`代码编辑器进行敲代码，后续大规模开发的时候，推荐使用`IDEA`代码编辑器进行代码的编写，该编辑器有较好的代码提示，能帮助我们快速的编写代码

##### `Sublime Text`常见的问题

1. 汉化`Sublime Text`
   - 打开`Sublime Text`代码编辑器
   - 使用快捷键`shift+ctrl+p`
   - 输入`Package Control: Install Package`
   - 在搜索框中输入`Chinese`，选择下拉框中的`ChineseLocalizations`
   - 下载完重新打开编辑器，即可汉化
2. `Sublime`里面找不到`GBK`编码格式 
   - 打开`Sublime Text`代码编辑器
   - 使用快捷键`shift+ctrl+p`
   - 输入`Package Control: Install Package`
   - 在搜索框输入`converToUTF8`，选择并安装
   - 后续在文件->`Set File Encoding to`中就可以选择`gbk`进行编码了

#### `JDK`的安装

`JDK`是`Java`开发工具包，`JDK`=`JRE`+`Java`的开发工具（`java`、`javac`、`javadoc`、`javap`等）

`JRE`是`Java`的运行环境，包括了`Java`虚拟机和`Java`程序所需的核心类库等，如果想要运行一个开发好的（编译好的）`Java`程序，计算机中只需安装`JRE`即可

安装后的文件系统结构：

- `bin`目录：包含了所有的`Java`开发工具

  安装后，需要配置环境变量，将`bin`目录的路径添加到环境变量中

- `jre`目录：`jdk`中安装的`jre`目录

- `src.zip`：是`JDK`的源码包，里面有其源代码

***

### 运行机制

程序：计算机执行某些操作或解决某个问题而编写的一系列**有序指令的集合**

`Java`的运行机制和过程：`Java`程序可以运行在跨平台的系统上，其根本原因是由于`JVM`（`Java`的虚拟计算机，具有指令集并使用不同的存储区域，负责执行指令，管理数据、内存、寄存器），每个操作系统都可以去下载其对应的`JVM`，从而去运行`Java`程序，`JVM`是包含在`JDK`中的

`Java`虚拟机机制屏蔽了底层运行平台的差别，实现了一次编译，到处运行：

- 编译：将`Java`源文件通过编译器将其编译成`JVM`可以识别的字节码文件

  编译指令：`javac 编写的Java文件`

  如果程序没有错误，就可以编译成功，会在源文件目录中出现一个字节码文件，也就是可执行的`Java`程序

- 运行：通过运行工具`java.exe`对字节码文件进行执行，本质就是将`.class`文件装载到`jvm`机执行

- 运行指令：`java 编译后的Java文件`

![image-20250311211020786](..\images\image-20250311211020786.png)

对修改后的源文件，需要进行重新编译，生成新的`.class`文件，再执行，**才能生效**

***

### 第一个`Java`程序

```java
// 第一个java程序
// 编写一个类
public class Hello {
	// 编写一个类方法
	public static void main(String[] args) {
		System.out.println("helloWorld!");    // 一个结束语句要以分号结尾
	}
}
```

> 声明`Hello`是一个公有的类
>
> `public static void main(String[] args)`表示定义一个主方法，是一个程序执行的入口
>
> `static`表示定义一个静态的方法
>
> `System.out.printIn()`：内置的输入方法，将内容输出到屏幕上
>
> 在编译的时候，如果文件内有中文，包括注释，我们需要将编码方式改为`gbk`的形式，这样才能正常编译

使用命令行终端，在当前代码的目录下输入`javac Hello.java`进行编译，成功编译后，会出现`Hello.class`的编译结果文件，使用命令`java Hello`即可运行，得到运行结果

![image-20250311210554522](..\images\image-20250311210554522.png)

***

### 注释

注释是用于说明解释程序的文字提示，提高了代码的可读性，编写程序需要养成注释的好习惯，推荐先将自己的思想通过注释整理出来，再用代码去实现

- 单行注释

  ```java
  // 单行注释
  ```

  > 单行注释快捷键：选中区域+`ctrl`+`/ `取消注释同样是这个快捷键

- 多行注释

  ```java
  /* 多行
     注释 */
  ```

  > 多行注释中不能嵌套多行注释
  >
  > 多行注释快捷键：选中区域+`Ctrl`+`shift`+/ 取消注释是选中区域+Ctrl+shift+
  > 选中区域+Ctrl+shift+\

- 文档注释

  文档注释的内容可以被`JDK`提供的工具`javadoc`所解析，生成一套以网页文件形式体现的该程序的说明文档，文档注释一般写在类中（想要对类提供相关的注释，我们一般使用文档注释），只放在类、接口、成员变量、方法之前（因为Javadoc只处理这些地方的文档注释，而忽略其他地方的文档注释）

  文档注释要按照`javadoc`工具提供的标签进行，以`/**`开始， 以`*/`结束：

  ```java
  /**
   * @author  jlc
   * @version 1.0
   */
  ```

  > 将文档标签生成网页文件的命令：`javadoc -d 存放生成文档标签的文件夹目录地址 -xx -yy 要编译的文件`
  >
  > 对应的`xx`和`yy`，分别是文档注释中使用了的标签：`author`和`version`
  >
  > 文档注释在协作化项目开发过程中使用的是非常多的
  >
  > 文档注释快捷键：`alt`+`shift`+`j`

  文档注释常见的`javadoc`标签有：

  |      标签       |                             描述                             |
  | :-------------: | :----------------------------------------------------------: |
  |    `@author`    |                           作者标识                           |
  |  `@deprecated`  | 标识当前`API`已经过期，仅为了保证兼容性依然存在，以此告之开发者不应再用这个`API` |
  |  `{@docRoot}`   |                   指明当前文档根目录的路径                   |
  |  `@exception`   |                     标志一个类抛出的异常                     |
  | `{@inheritDoc}` |                     从直接父类继承的注释                     |
  |    `{@link}`    |               链接到某个特定的成员对应的文档中               |
  | `{@linkplain}`  |     插入一个到另一个主题的链接，但是该链接显示纯文本字体     |
  |    `@param`     |     方法的入参名及描述信息，如入参有特别要求，可在此注释     |
  |    `@return`    |                      对函数返回值的注释                      |
  |     `@see`      |            引用,查看相关内容，如类、方法、变量等             |
  |    `@serial`    |                      说明一个序列化属性                      |
  |  `@serialData`  |  说明通过`writeObject( )` 和` writeExternal( )`方法写的数据  |
  | `@serialField`  |               说明一个`ObjectStreamField`组件                |
  |    `@since`     |          描述文本,API在什么程序的什么版本后开发支持          |
  |    `@throws`    |                 构造函数或方法所会抛出的异常                 |
  |   `{@value}`    |             显示常量的值，该常量必须是static属性             |
  |   `@version`    |                            版本号                            |

***

### 开发规范

在`Java`开发过程中，我们需要遵守一些开发细节，这样才能减少一些不必要的错误：

1. `Java`应用程序的执行入口是`main()`方法，有固定的书写格式：

   `public static void main(String[] args) {...}`

2. `Java`严格区分大小写

3. `Java`方法由一条语句构成，每个语句以`;`结束

4. 大括号是成对出现的，建议先写`{}`，再写代码

5. 一个源文件中最多只能有一个`public`类，其他类的个数不限，但是，只要有一个类，不管是不是`public`类，在编译后，都会生成一个`.class`文件，即有几个类，就生成几个`.class`文件

6. 如果源文件包含一个`public`类，则文件名必须按照该类进行命名

7. 可以将`main`方法写在非`public`类中，然后指定运行编译后的非`public`类，这样入口方法就是非`public`的`main`方法，也就是说会运行这个类中的入口方法

8. 我们需要确保文件名和主类名保持一致，否则会编译出错

开发规范：

- 对于类、方法的注释，要以`javadoc`的方式来进行编写
- 对于非`javadoc`的注释，往往是给代码的维护者看的，着重告诉读者为什么这么写，如何修改，要注意什么问题等
- 运算符和等号左右各加一个空格
- 源文件使用`utf-8`编码
- 行宽不要超过80个字符

***

### `windows`系统下的`DOS`指令

`DOS`：磁盘操作系统，可以使用指令的方式对文件系统进行操作，常见的指令有：

- `dir`：查看当前目录中有什么

- `tree`：查看指定的目录下所有的子级目录

- `cd`：切换到其他目录    `cd .. `：返回上一级    `cd \`：切换到根目录

  切换到`C`盘：`cd /D c:`

- `md`：新建文件夹（目录）

- `rd`：删除文件夹（目录）

- `cls`：清除终端屏幕中的内容，清屏

- `exit`：退出命令行终端

- `type`：创建文件    `type nul > 文件名`

- `echo`：输入内容到文件中

  `echo hello > hello.txt`   在`hello.txt`文件中就插入了`hello`内容，先创建在写入

- `copy`：复制文件

- `move`：剪切文件

- `del`：删除文件

相对路径：从当前目录开始定位，形成的一个路径

绝对路径：从根目录（顶级目录）开始定位，形成的路径



## 转义字符

`Java`中常见的转义字符有：

- `\t`：一个制表位，实现左对齐的功能

- `\n`：换行符

- `\\`：一个`\`      如果要在控制台中输出两个`\`，需要使用两个斜杠进行转义：`\\\\`

- `\"`：一个`"`

- `\'`：一个`‘`

- `\r`：一个回车

  回车是将光标放到最前面，如`System.out.println("jlc\r1")`，打印的结果就是：`1lc`

  光标回到最前面，在打印1，将第一个字符覆盖掉了



## 变量

程序中需要变量，我们可以通过不同类型的变量来代表不同的数据，变量是程序的基本组成单位

变量相当于内存中一个数据存储空间的表示，通过变量名，我们可以访问到这个变量的具体值（总之，变量可以代表一个变化的值）

变量有三个基本的要素：类型、名称和值，如`int a = 1;`

- 变量需要先声明，再使用，可以简写声明和赋值在同一行
- 变量的值可以在同一类型中进行不断的变化，即可以重复的进行同一类型的赋值
- 变量是在内存中的一个存储区域，不同类型的变量，占用的空间大小是不同的，如`int`占4个字节，`double`占8个字节
- 变量名在同一个作用域不能重名

***

### 数据类型

`Java`是强类型语言，每一种数据都要明确数据类型

在实际的使用中，有很多的数据类型，对于不同用途的数据，我们声明不同数据类型的变量

#### 基本数据类型

##### 数值型

- 整数类型，用来存放整数：

  - `byte[1]`：`byte`类型（字节），占1个字节，范围-128~127
  - `short[2]`：`short`类型（短整型），占2个字节，范围-32768~32767
  - `int[4]`：`int`类型（整型），占4个字节，范围-2147483648~2147483647
  - `long[8]`：`long`类型（长整型），占8个字节，范围-2^63~2^63-1

  > `bit`是计算机中的最小存储单位，1`byte` =8`bit`，字节`byte`是计算机中的基本存储单位
  >
  > `byte b = 10;`通常情况下，10在`Java`中默认是一个`int`类型，但是当把具体的数赋值给`byte`（`short`类型同理）时，系统会先判断当前值是否在`byte`范围内，如果是，就可以正常的赋值，但是以下的方式是不正确的：
  >
  > ```java
  > int n = 1;
  > byte b = n;   // 编译报错，变量赋值，需要先判断类型
  > ```
  >
  > n在内存中先声明了4个字节大小的存储空间中，但是b声明的存储空间只有1个字节
  >
  > 总之，具体数赋值，先判断范围；变量赋值，先判断类型
  >
  > `Java`的整型常量（具体值）默认为`int`型，声明`long`型常量需后面加上`l`或`L`，如`long n = 1L;`

- 浮点型，用来存放小数：

  - `float[4]`：单精度浮点类型，占4个字节，范围-3.403E38~3.403E38
  - `double[8]`：双精度浮点类型，占8个字节，范围-1.798E308~1.798E308

  > 浮点数在计算机中的存放形式：浮点数=符号位+指数位+尾数位
  >
  > 其中，尾数部分可能丢失，造成精度的损失（小数都是近似值）
  >
  > `Java`的浮点型常量（具体值）默认为`double`型，声明`float`型常量，需后面加`f`或者`F`，如`float n = 1.1F;`（`float n = 1.1;`会报错，不能将`double`类型赋值给`float`类型的变量），大的字节范围不能往小的字节范围内放，但是小的字节范围可以往大的字节范围内放，如`double n = 1.1f;`是正确的，编译不会报错
  >
  > 通常情况下，我们应该使用`double`类型，因为它的精度比`float`型更精确（精度低，会导致过长的小数点后的内容丢失）
  >
  > 浮点型常量有两种表示形式：
  >
  > - 十进制数形式：如：5.12     512.0f    .512（前面的0可以省略，但是必须有小数点）
  > - 科学计数法形式：如：5.12e2（5.12*10的2次方，返回的是512.0，因为是浮点数类型）    5.12E-2
  >
  > 浮点数的使用陷阱：
  >
  > ![image-20250313201321542](..\images\image-20250313201321542.png)
  >
  > 计算机在接收8.1的时候，不能确定8.1小数位的1后面是否还有其他的位数，它可能认为是8.10000001，所以，在计算结果的时候，也是以精度的方式进行返回的
  >
  > 所以说，当我们对小数的运行结果进行相等判断的时候，要格外的注意，应该通过两个数的差值的绝对值，在某个精度范围内进行判断

##### 字符型

- 字符类型：`char[2]`，存放单个字符`'a'`，该类型占两个字节，可以存放一个汉字

> 字符常量是用单引号`''`括起来的单个字符，不能使用双引号，如果使用双引号，就是字符串类型了
>
> 如`char c = "9";`编译器就会报错，字符串类型不能赋值给字符类型的变量
>
> `String`字符串类型，不是基本数据类型，实际上它是一个类，多个字符，我们使用字符串来存放
>
> 在`Java`中，`char`的本质是一个整数，在输出的时候，是`unicode`码对应的字符，字符类型也可以直接存放一个数字：`char c = 97;`，但是输出的是`a`，97在计算机中的`ASSCII`码中对应的是`a`，对于任意的汉字字符，也有具体对应的`unicode`码，如果我们想要将对应的字符转换为对应的`unicode`码，我们将这个字符通过`int`类型进行转化即可得到对应的`unicode`码
>
> `Java`中允许使用转义字符`\`，来将其后面跟着的字符转变为特殊字符型常量，如`char c = '\n';`
>
> `char`类型是可以进行运算的，该类型相当于一个整数，任何字符都要对应的`unicode`码

字符类型的本质讨论：字符型数据存储到计算机中，需要将字符对应的码值（整数）找出来，如`'a'`字符：

存储：`'a'`  --->  码值  --->   二进制    --->   存储

读取：二进制   --->   97   --->   `'a'`   --->   显示

##### 布尔型

- `boolean[1]`：布尔类型，占1个字节，只允许取`true`和 `false`

  `boolean`类型适用于逻辑运算

  在`Java`语言中，不能使用0或非0的整数来代替`false`和`true`，这一点和`C`语言是不同的

##### 自动类型转换

当`Java`程序在进行赋值或者运算时，精度小的类型可以自动转换为精度大的数据类型，这个就是自动类型的转换

![image-20250315160649836](..\images\image-20250315160649836.png)

箭头的流向表示低精度向高精度进行转换

在理论上，`int a = 'c';`该语句的语法是错误的，不能将`char`字符类型赋值给`int`数值类型，但是有了自动类型转换，精度低的`char`类型，可以自动的转化为`int`类型，所有`int a = 'c';`该语句在编译的过程中不会报错

低精度的类型，可以连跨级别的向高精度的类型进行自动转换

自动类型转换细节：

1. 有多种类型的数据混合运算时，系统首先自动将所有数据转换成容量（精度）最大的那种数据类型，然后再进行计算

2. 当我们把容量（精度）大的数据类型赋值给容量（精度）小的数据类型时，就会报错，反之则会进行自动类型的转换

3. （`byte`、`short`）和`char`之间不会互相自动转换

   ```java
   byte b = 10;
   char c = b;   // 报错，byte类型不会自动转换为char类型
   ```

4. `byte`、`short`和`char`它们三者可以计算，在计算时（不管是单独类型的计算还是混合类型的计算）首先转换为`int`类型

   ```java
   byte b = 1;
   short s1 = 1;
   short s2 = b + s1;   // 报错，运算后，转化成了int类型，不能赋值给精度小的short类型
   
   byte b2 = 1;
   byte b3 = b + b2;   // 报错，byte类型在运算后会转化为int类型
   ```

5. `boolean`类型不参与转换

6. 自动提升原则：表达式结果的类型自动提升为操作数中最大的类型

##### 强制类型转化

强制类型转化是自动类型转换的逆过程，将容量（精度）大的数据类型转换为容量（精度）小的数据类型，使用时需要加上强制转换符`()`，但是，强制类型转换可能会造成精度的降低或溢出，需要格外注意

```java
int i = (int)1.9;    // 强制将double类型转换为int类型，精度损失了，结果输出为1，掉了小数位
```

强制类型转换细节：

1. 强制符号只针对于最近的操作数有效，往往会使用小括号提升优先级

   ```java
   int x = (int)10 * 3.5 + 6 * 1.5;    // 编译不通过，不能将double类型赋值给int类型
   
   int x = (int)(10 * 3.5 + 6 * 1.5);  // 结果为44
   ```

#### 引用数据类型

- 类（`class`）
- 接口（`interface`）
- 数组（`[]`）

#### 基本数据类型和`String`类型的转换

- 基本数据类型转`String`类型，语法：将基本类型的值+`""`即可：

  ```java
  int n = 100;
  float f = 1.1F;
  double d = 4.5;
  bollean b = true;
  // 基本数据类型转String字符串
  String s1 = n + "";
  String s2 = f + "";
  String s3 = d + "";
  String s4 = b + "";
  ```

- `String`类型转基本数据类型，语法：通过基本类型的包装类调用`parseXX`方法：

  ```java
  String s = "123";
  // String字符串转换为基本数据类型
  int n = Integer.parseInt(s);  // 123
  double d = Double.parseDouble(s);  // 123.0
  float f = Float.parseFloat(s);   // 123.0
  Long l = Long.parseLong(s);   // 123
  byte b = Byte.parseByte(s);   // 123
  short s = Short.parseShort(s);  // 123
  boolean b = Boolean.parseBoolean("true");   // true
  ```

  > 使用基本数据类型对应包装类的相应方法进行转换，将字符串类型转换为基本数据类型

  对于将字符串转换成字符`char`类型，是将字符串的第一个字符取下来：

  ```java
  String s = "123";
  s.charAt(0);   // '1'
  ```

  注意：将字符串类型转换成基本的数据类型时，要确保字符串类型能够转成有效的数据，如，不能将字母转换成整数，如果格式不正确，系统会抛出异常

***

### 加号的使用

在程序中，加号有不同的用途：

- 当左右两边都是数值型时，则做加法运算
- 当左右两边有一方为字符串，则做拼接运算

***

### 编码

字符和码值的对应关系是通过字符编码决定的（是规定好的）常见的字符编码表有：

- `ASCII`：一个字节表示，一共表示了128个字符，实际上一个字节可以表示256个字符，但是`ASCII`字符集只使用了128个字符，这个编码是为英文国家创建的，英文只有26个字母，加上一些符号，128个字符足够使用了
- `Unicode`：`ASCII`表的一个扩展（`Unicode`码是兼容`ASCII`码的，同样的`'a'`都是用97来表示），固定大小的编码，使用两个字节来表示字符，字母和汉字统一都是占用两个字节，比较浪费空间
- `utf-8`：大小可变的编码，可以使用1至6个字节来表示一个符号，根据不同的符号而变化字节长度，字母使用一个字节，汉字使用三个字节，在互联网中使用最广的一种`Unicode` 的实现形式
- `gbk`：可以表示汉字，而且范围广，字母使用一个字节，汉字使用两个字节（编码的汉字种类较`utf-8`少，`utf-8`汉字是使用三个字节的，涉及到的汉字种类范围广）
- `big5`：可以表示繁体中文

不同的编码，对文件的大小是有影响的，有的编码汉字是用两个字节表示的，有的编码汉字是用三个字节表示的，会对保存的文件大小造成影响



## `API`

`Java`系统官方为我们提供了基本的编程接口（系统提供的类和相关方法）

我们可以去`Java API`文档中快速的查找需要的`API`：[Java 8 中文版 - 在线API手册 - 码工具](https://www.matools.com/api/java8)

### `Java`类的组织形式

![image-20250313203233056](..\images\image-20250313203233056.png)

我们查询文档的思路是：按照包去查找类，再去查找具体的方法，如果我们不知道这个类在哪个包的下面，我们可以直接进行搜索，找到这个类
